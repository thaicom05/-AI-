
<div class="bg-gray-800/50 backdrop-blur-sm border-t border-gray-700 p-4 w-full">
  <!-- Tabs -->
  <div class="flex items-center justify-center space-x-2 mb-4">
    <button (click)="selectTab('textToVideo')"
      [class]="activeTab() === 'textToVideo' ? 'bg-indigo-600 text-white' : 'bg-gray-700 hover:bg-gray-600 text-gray-300'"
      class="px-4 py-2 rounded-lg text-sm font-semibold transition-colors duration-200">
      สร้างวิดีโอจากข้อความ
    </button>
    <button (click)="selectTab('imageToVideo')"
      [class]="activeTab() === 'imageToVideo' ? 'bg-indigo-600 text-white' : 'bg-gray-700 hover:bg-gray-600 text-gray-300'"
      class="px-4 py-2 rounded-lg text-sm font-semibold transition-colors duration-200">
      สร้างวิดีโอจากภาพ
    </button>
    <button (click)="selectTab('imageToText')"
      [class]="activeTab() === 'imageToText' ? 'bg-indigo-600 text-white' : 'bg-gray-700 hover:bg-gray-600 text-gray-300'"
      class="px-4 py-2 rounded-lg text-sm font-semibold transition-colors duration-200">
      อธิบายรูปภาพ
    </button>
  </div>

  <!-- Input Area -->
  <div class="relative bg-gray-800 border border-gray-600 rounded-2xl p-2 flex items-end">
    @if (activeTab() !== 'textToVideo') {
    <button (click)="fileInput.click()"
      class="p-2 text-gray-400 hover:text-white hover:bg-gray-700 rounded-full transition-colors duration-200 mr-2 shrink-0">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12" />
      </svg>
    </button>
    <input type="file" #fileInput (change)="onFileChange($event)" class="hidden" accept="image/*" />
    }
    
    <textarea [(ngModel)]="prompt" (keydown.enter)="onSubmit(); $event.preventDefault()"
      [placeholder]="activeTab() === 'textToVideo' ? 'เช่น: โฮโลแกรมแมวนีออนกำลังขับรถด้วยความเร็วสูง...' : 'อธิบายสิ่งที่คุณต้องการให้เกิดขึ้นในวิดีโอ หรือถามเกี่ยวกับรูปภาพ...'"
      class="w-full bg-transparent text-gray-200 placeholder-gray-500 focus:outline-none resize-none border-0 focus:ring-0 pr-20 text-base"
      rows="1"></textarea>

    @if (selectedFile()) {
      <div class="absolute left-14 -top-8 bg-indigo-600 text-white text-xs px-2 py-1 rounded-full flex items-center">
        <span>{{ selectedFile()?.name }}</span>
        <button (click)="selectedFile.set(null)" class="ml-2 text-indigo-200 hover:text-white">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    }

    <button (click)="onSubmit()" [disabled]="!prompt().trim() && !selectedFile()"
      class="absolute right-3 bottom-3 bg-indigo-600 text-white rounded-lg p-2 disabled:bg-gray-600 disabled:cursor-not-allowed hover:bg-indigo-500 transition-colors duration-200">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"
        stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M5 10l7-7m0 0l7 7m-7-7v18" />
      </svg>
    </button>
  </div>
</div>
